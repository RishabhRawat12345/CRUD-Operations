import{access as n}from"fs/promises";import{dirname as i,join as p}from"path";function*f(r){let t=r._router?.stack??r.router?.stack;if(!(!t||!Array.isArray(t))){for(let e of t)if(e){if(e.route?.path&&e.route.methods)for(let a of Object.keys(e.route.methods))yield{method:a.toUpperCase(),path:e.route.path};else if(e.name==="router"&&e.handle?.stack&&Array.isArray(e.handle.stack)){let a=e.regexp?.source?.replace("\\/?(?=\\/|$)","").replace("^","").replace("$","")||"";for(let o of e.handle.stack)if(o?.route?.path&&o.route.methods)for(let s of Object.keys(o.route.methods))yield{method:s.toUpperCase(),path:a+o.route.path}}}}}async function h(r){let t=r;for(;;)try{let e=p(t,"package.json");return await n(e),t}catch{let e=i(t);if(e===t)return null;t=e}}export{f as extractRoutes,h as findProjectRoot};
//# sourceMappingURL=utils.js.map